<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Livraria Carrinho</title>
    <link rel="stylesheet" href="carrinho.css">
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="./books.js"></script>
</head>
<body>
    <!--Começo Header-->
    <div class="header">
        <div class="main-header">
            <div class="ds-flex" style="width: 40%;">
                <h1><a href="home.html" style="cursor: pointer; text-decoration: none;">Livraria</a></h1>
            </div>
            <div class="ds-flex" style="width: 40%; justify-content: space-around;">
                <a href="sobrenos.html">Sobre nós</a>
                <div>
                    <label for="search-input">
                        <i style="font-size: 18px;transform: translateX(35px);" class="fa fa-search" aria-hidden="true"></i>
                    </label>
                    <input id="search-input" class="header-input" type="text" name="input" placeholder="">
                </div>
                <a href="tela-login.html"><i class="fa fa-user-circle-o" aria-hidden="true"></i><br>Entrar</a>
                <a href="carrinho.html"><i class="fa fa-shopping-cart" aria-hidden="true"></i><br>Carrinho</a>
            </div>
        </div>
    </div>
    <div class="secondary-header">
        <div class="dropdown">
            <button style="background-color: transparent; border: 0; padding: 0;" class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-bars" aria-hidden="true"></i> Categorias
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <li><a class="dropdown-item" href="produtos.html">Ação</a></li>
              <li><a class="dropdown-item" href="produtos.html">Aventura</a></li>
              <li><a class="dropdown-item" href="produtos.html">Arquitetura</a></li>
              <li><a class="dropdown-item" href="produtos.html">Direito</a></li>
              <li><a class="dropdown-item" href="produtos.html">Economia</a></li>
              <li><a class="dropdown-item" href="produtos.html">Pedagogia</a></li>
              <li><a class="dropdown-item" style="color: orange;" href="produtos.html"><strong>Ver todos</strong></a></li>
            </ul>
          </div>
        <a style="color: white;" href="produtos.html">Mais Vendidos</a>
        <a style="color: white;" href="produtos.html">Livros Recomendados</a>
        <div class="dropdown">
            <button style="background-color: transparent; border: 0; padding: 0;" class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                Livros por Idioma
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
              <li><a class="dropdown-item" href="produtos.html">Inglês</a></li>
              <li><a class="dropdown-item" href="produtos.html">Espanhol</a></li>
              <li><a class="dropdown-item" href="produtos.html">Alemão</a></li>
              <li><a class="dropdown-item" href="produtos.html">Italiano</a></li>
              <li><a class="dropdown-item" href="produtos.html">Françês</a></li>
              <li><a class="dropdown-item" href="produtos.html">Japonês</a></li>
              <li><a class="dropdown-item" style="color: orange;" href="produtos.html"><strong>Ver todos</strong></a></li>
            </ul>
          </div>
    </div>
    <!--Final Header-->
    <div class="container">
        <h2>Carrinho de Compras</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Produto</th>
                    <th>Preço</th>
                    <th>Quantidade</th>
                    <th>Total</th>
                    <th>Ação</th>
                </tr>
            </thead>
            <tbody id="carrinho">
                
            </tbody>
        </table>
        <p id="totalCompra">Total: R$ 80.00</p>
        <a href="final-compra.html">Finalizar Compra</a>
    </div>
    <script>
        const total =[]
        function carrinho(id, i, array){

            let span = document.getElementById(id);

            span.innerHTML += '<tr><td style="display: flex; align-items: center; padding-top: 12px !important;"><img src="' + array[i].imagem + '" width="200px" height="200px"><div style="margin: 50px;"><p><strong>' + array[i].nome + '</p><p>' + array[i].autor + '</p></div></td><td id="preco' + i + '">R$' + array[i].preco + '</td><td><input type="number" min="1" value="1" onchange="valorProduto(this.value,' + array[i].preco + ',' + i + ')"/></td><td id="precoTotal' + i + '">R$ ' + array[i].preco + '</td><td><button>Remover</button></td></tr>';
            
            total[i-1] = parseInt(array[i].preco)    
        }

        carrinho('carrinho', 1, book)
        carrinho('carrinho', 2, book)
        carrinho('carrinho', 3, book)
        carrinho('carrinho', 4, book)
        totalCompra();

        function valorProduto(valor, preco, i){

            id = 'precoTotal' + i;

            let span = document.getElementById(id);

            total[i-1] = preco * valor;

            span.innerHTML = ''

            span.innerHTML += 'R$ ' + total[i-1].toFixed(2);

            totalCompra()
        }

        function totalCompra(){
            let totalDaCompra = 0
            for(i = 0; i < total.length; i++){
                totalDaCompra += total[i];
                console.log(total[i])
                console.log(totalDaCompra)
            }

            let span = document.getElementById("totalCompra");

            span.innerHTML = ''
            span.innerHTML += 'Total: R$' + totalDaCompra.toFixed(2);

        }

        
    </script>
</body>
</html>
